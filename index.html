<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASç½‘é¡µæ§åˆ¶å°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff69b4;
            --secondary-color: #ffb6c1;
            --background-color: #ffe4e1;
            --text-color: #333;
            --border-color: #000;
            --progress-bg: #f0f0f0;
        }

        [data-theme="blue"] {
            --primary-color: #4169e1;
            --secondary-color: #87ceeb;
            --background-color: #e6f3ff;
            --text-color: #333;
            --border-color: #000;
            --progress-bg: #f0f0f0;
        }

        body {
            background-color: var(--background-color);
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        /* ä¸»ç½‘æ ¼å®¹å™¨ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(7, 1fr);
            gap: 4px;
            height: 100vh;
            width: 100vw;
            padding: 10px 30px;
        }

        /* ç»„ä»¶åŸºç¡€æ ·å¼ */
        .component {
            border: 2px solid var(--border-color);
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        /* é¡¶éƒ¨ç»„ä»¶æ ·å¼ */
        .component-top {
            grid-row: 1 / 2;
            grid-column: 1 / 9;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
        }

        .theme-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .ip-selector {
            position: relative;
        }

        .ip-display {
            background: var(--secondary-color);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ip-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .ip-option {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        .ip-option:hover {
            background: var(--background-color);
        }

        /* ç»„ä»¶1: æ—¶é’Ÿå’Œç½‘ç»œ */
        .component-1 {
            grid-row: 2 / 6;
            grid-column: 1 / 3;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .clock {
            font-size: 3.75em;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .network-info {
            font-size: 1.35em;
            color: var(--text-color);
        }

        .network-speed {
            margin: 5px 0;
        }

        /* ç»„ä»¶2: CPU */
        .component-2 {
            grid-row: 2 / 4;
            grid-column: 3 / 7;
        }

        /* ç»„ä»¶3: å†…å­˜ */
        .component-3 {
            grid-row: 4 / 6;
            grid-column: 3 / 7;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            position: relative;
            margin: 10px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--progress-bg);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             color: black;
             font-size: 12px;
             font-weight: bold;
         }

        /* ç»„ä»¶4: ç¡¬ç›˜æ€»å®¹é‡åœ†å½¢è¿›åº¦æ¡ */
        .component-4 {
            grid-row: 2 / 6;
            grid-column: 7 / 9;
            justify-content: center;
            align-items: center;
        }

        .circular-progress {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }

        .circular-progress svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .circular-progress circle {
            fill: none;
            stroke-width: 8;
        }

        .progress-bg-circle {
            stroke: var(--progress-bg);
        }

        .progress-circle {
            stroke: var(--primary-color);
            stroke-linecap: round;
            transition: stroke-dasharray 0.5s ease;
        }

        .circular-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 21px;
            color: var(--text-color);
        }

        /* ç»„ä»¶5-8: æŒ‰é’® */
        .component-5, .component-6, .component-7, .component-8 {
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .component-5 {
            grid-row: 6 / 7;
            grid-column: 1 / 2;
        }

        .component-6 {
            grid-row: 6 / 7;
            grid-column: 2 / 3;
        }

        .component-7 {
            grid-row: 7 / 8;
            grid-column: 1 / 2;
        }

        .component-8 {
            grid-row: 7 / 8;
            grid-column: 2 / 3;
        }

        .component-5:hover, .component-6:hover, .component-7:hover, .component-8:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* ç»„ä»¶9: GIFå±•ç¤ºåŒºåŸŸ */
        .component-9 {
            grid-row: 6 / 8;
            grid-column: 3 / 7;
            justify-content: center;
            align-items: center;
            background: #f8f8f8;
            border-style: dashed;
            cursor: pointer;
            gap: 10px;
        }
        
        .gif-container {
              display: grid;
              grid-template-columns: 1fr 1fr 1fr 1fr;
              grid-template-rows: 1fr;
              gap: 5px;
              width: 100%;
              height: 100%;
          }
         
         .gif-item {
             height: 100%;
             border-radius: 8px;
             overflow: hidden;
             cursor: pointer;
             transition: transform 0.2s ease;
         }
         
         .gif-item:hover {
             transform: scale(1.05);
         }
         
         .gif-item img {
             width: 100%;
             height: 100%;
             object-fit: cover;
             border-radius: 8px;
         }

        /* ç»„ä»¶10: ç¡¬ç›˜åˆ—è¡¨ */
         .component-10 {
             grid-row: 6 / 8;
             grid-column: 7 / 9;
             cursor: pointer;
             transition: all 0.3s ease;
             display: flex;
             align-items: center;
             justify-content: center;
         }

         /* ç™½è‰²è¦†ç›–å±‚ç»„ä»¶ */
         .white-overlay {
             position: fixed;
             top: 0;
             left: 0;
             width: 100vw;
             height: 100vh;
             background-color: var(--background-color);
             z-index: -1;
             opacity: 0;
             transition: all 0.3s ease;
             display: flex;
             font-size: 18px;
             color: var(--text-color);
             padding: 0;
             overflow: hidden;
         }

         /* éŸ³ä¹æ’­æ”¾çŠ¶æ€æ˜¾ç¤ºæ ·å¼ */
         .music-status-btn {
             background: var(--primary-color);
             color: white;
             border: none;
             border-radius: 8px;
             padding: 8px 16px;
             font-size: 14px;
             font-weight: bold;
             cursor: pointer;
             display: flex;
             align-items: center;
             gap: 8px;
             transition: all 0.3s ease;
             margin-left: 10px;
         }

         .music-status-btn:hover {
             opacity: 0.8;
             transform: scale(1.05);
         }

         .music-waves {
             display: flex;
             gap: 3px;
             align-items: center;
         }

         .music-waves span {
             width: 2px;
             height: 16px;
             background: white;
             border-radius: 1px;
             animation: wave 1.2s infinite ease-in-out;
         }

         .music-waves span:nth-child(1) { animation-delay: 0s; }
         .music-waves span:nth-child(2) { animation-delay: 0.1s; }
         .music-waves span:nth-child(3) { animation-delay: 0.2s; }
         .music-waves span:nth-child(4) { animation-delay: 0.3s; }

         @keyframes bounce {
             0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
             40% { transform: translateY(-5px); }
             60% { transform: translateY(-3px); }
         }

         @keyframes wave {
             0%, 40%, 100% { transform: scaleY(0.4); }
             20% { transform: scaleY(1); }
         }

         /* è¦†ç›–å±‚å†…éƒ¨ç»„ä»¶æ ·å¼ */
         .overlay-component {
             border: 2px solid var(--border-color);
             background-color: white;
             border-radius: 8px;
             padding: 10px;
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
             font-size: 14px;
             font-weight: bold;
             transition: all 0.3s ease;
         }

         .overlay-component:hover {
             transform: scale(1.02);
             box-shadow: 0 4px 8px rgba(0,0,0,0.1);
         }


         

         .music-btn.active::after {
             content: 'âœ“';
             position: absolute;
             top: 5px;
             right: 5px;
             background: rgba(255,255,255,0.9);
             color: #333;
             border-radius: 50%;
             width: 20px;
             height: 20px;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 12px;
             font-weight: bold;
         }

         .white-overlay.show {
             z-index: 100;
             opacity: 1;
         }

         .disk-summary {
             padding: 10px;
             background: var(--background-color);
             border-radius: 6px;
         }

         .disk-expanded {
             position: fixed;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             background: white;
             border: 3px solid var(--border-color);
             border-radius: 12px;
             padding: 20px;
             max-height: 70vh;
             overflow-y: auto;
             z-index: 2000;
             min-width: 400px;
             box-shadow: 0 10px 30px rgba(0,0,0,0.3);
         }

         .disk-overlay {
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(0,0,0,0.5);
             z-index: 1999;
         }

         .disk-item {
             margin-bottom: 15px;
             padding: 10px;
             background: var(--background-color);
             border-radius: 6px;
         }

         .disk-name {
             font-size: 12px;
             margin-bottom: 5px;
             color: var(--text-color);
         }

         .disk-progress {
             height: 15px;
             background: var(--progress-bg);
             border-radius: 8px;
             overflow: hidden;
             position: relative;
         }

         .disk-progress-fill {
             height: 100%;
             background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
             transition: width 0.5s ease;
         }

         .disk-info {
             font-size: 10px;
             margin-top: 3px;
             color: black;
         }

         .disk-expanded-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 20px;
             border-bottom: 1px solid rgba(0, 0, 0, 0.1);
             padding-bottom: 10px;
         }

         .disk-expanded-header h3 {
             margin: 0;
             color: var(--text-color);
         }

         .close-btn {
             background: none;
             border: none;
             font-size: 24px;
             color: var(--text-color);
             cursor: pointer;
             padding: 0;
             width: 30px;
             height: 30px;
             display: flex;
             align-items: center;
             justify-content: center;
             border-radius: 50%;
             transition: background 0.3s ease;
         }

         .close-btn:hover {
             background: rgba(0, 0, 0, 0.1);
         }

         .disk-detail-list {
             display: flex;
             flex-direction: column;
             gap: 15px;
         }

         .disk-detail-list .disk-item {
             background: var(--background-color);
             border-radius: 10px;
             padding: 15px;
         }

         .fullscreen-btn {
             background: var(--secondary-color);
             color: var(--text-color);
             border: none;
             padding: 8px 16px;
             border-radius: 8px;
             cursor: pointer;
             font-weight: bold;
             transition: all 0.3s ease;
             margin-left: 10px;
         }

         .fullscreen-btn:hover {
             opacity: 0.8;
             transform: scale(1.05);
         }

         /* éŸ³ä¹æ’­æ”¾å™¨è¿›åº¦æ¡æ ·å¼ */
         .progress-container {
             display: flex;
             align-items: center;
             gap: 10px;
             margin: 15px 0;
             width: 100%;
         }


    </style>
</head>
<body>
    <div class="grid-container">
        <!-- é¡¶éƒ¨ç»„ä»¶: ä¸»é¢˜åˆ‡æ¢ã€å…¨å±å’ŒIPé€‰æ‹© -->
         <div class="component component-top">
             <div style="display: flex; align-items: center; gap: 10px;">
                 <button class="theme-toggle" onclick="toggleTheme()">ğŸ¨ ä¸»é¢˜åˆ‡æ¢</button>
                 <button class="fullscreen-btn" onclick="toggleFullscreen()">ğŸ”³ å…¨å±</button>
                 <!-- éŸ³ä¹æ’­æ”¾çŠ¶æ€æŒ‰é’® -->
                 <button class="music-status-btn" id="musicStatusBtn" style="display: none;" onclick="showWhiteOverlay()">
                     ğŸµ éŸ³ä¹æ’­æ”¾ä¸­
                     <div class="music-waves">
                         <span></span>
                         <span></span>
                         <span></span>
                         <span></span>
                     </div>
                 </button>
             </div>
             <div class="ip-selector">
                 <div class="ip-display" onclick="toggleIpDropdown()" id="currentIp">è·å–ä¸­...</div>
                 <div class="ip-dropdown" id="ipDropdown">
                     <!-- IPé€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                 </div>
             </div>
         </div>
        
        <!-- ç»„ä»¶1: æ—¶é’Ÿå’Œç½‘ç»œ -->
        <div class="component component-1">
            <div class="clock" id="clock">20:36</div>
            <div class="network-info">
                <div class="network-speed">â†‘ <span id="uploadSpeed">0.354</span> MB/s</div>
                <div class="network-speed">â†“ <span id="downloadSpeed">0.111</span> MB/s</div>
            </div>
        </div>
        
        <!-- ç»„ä»¶2: CPU -->
        <div class="component component-2">
            <div class="progress-header">
                <span>ğŸ–¥ï¸ CPU</span>
                <span id="cpuTemp">--Â°C</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="cpuProgress" style="width: 11.9%"></div>
                    <div class="progress-text" id="cpuText">11.9% ä½¿ç”¨ä¸­</div>
                </div>
            </div>
        </div>
        
        <!-- ç»„ä»¶3: å†…å­˜ -->
        <div class="component component-3">
            <div class="progress-header">
                <span>ğŸ“Š RAM</span>
                <span id="memoryInfo">19.53GB / 63.93GB</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="memoryProgress" style="width: 30.5%"></div>
                    <div class="progress-text" id="memoryText">30.5% ä½¿ç”¨ä¸­</div>
                </div>
            </div>
        </div>
        
        <!-- ç»„ä»¶4: ç¡¬ç›˜æ€»å®¹é‡ -->
        <div class="component component-4">
            <h3 style="text-align: center; margin-bottom: 15px;">ğŸ’¾ æ€»å®¹é‡</h3>
            <div class="circular-progress">
                <svg>
                    <circle class="progress-bg-circle" cx="60" cy="60" r="52"></circle>
                    <circle class="progress-circle" cx="60" cy="60" r="52" id="totalDiskCircle"></circle>
                </svg>
                <div class="circular-text">
                    <div id="totalDiskPercent">77%</div>
                    <div style="font-size: 10px; margin-top: 5px;" id="totalDiskInfo">1469GB / 1908GB</div>
                </div>
            </div>
        </div>
        
        <!-- ç»„ä»¶5-8: åŠŸèƒ½æŒ‰é’® -->
        <div class="component component-5" onclick="hideWhiteOverlay()">ğŸ  ä¸»é¡µ</div>
        <div class="component component-6" onclick="showWhiteOverlay()">ğŸµ éŸ³ä¹</div>
        <div class="component component-7">æŒ‰é’®3</div>
        <div class="component component-8">æŒ‰é’®4</div>
        
        <!-- ç»„ä»¶9: GIFå±•ç¤ºåŒºåŸŸ -->
        <div class="component component-9" id="component9">
                     <div class="gif-container" id="gifContainer">
                         <div class="gif-item" onclick="switchSingleGif(0)">
                             <img id="gif1" src="" alt="GIF 1">
                         </div>
                         <div class="gif-item" onclick="switchSingleGif(1)">
                             <img id="gif2" src="" alt="GIF 2">
                         </div>
                         <div class="gif-item" onclick="switchSingleGif(2)">
                             <img id="gif3" src="" alt="GIF 3">
                         </div>
                         <div class="gif-item" onclick="switchSingleGif(3)">
                             <img id="gif4" src="" alt="GIF 4">
                         </div>
                     </div>
                 </div>
        
        <!-- ç»„ä»¶10: ç¡¬ç›˜åˆ—è¡¨ -->
         <div class="component component-10" onclick="showDiskDetails()">
             <div id="diskSummary">
                 <!-- ç¡¬ç›˜æ‘˜è¦å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
             </div>
         </div>

         <!-- ç¡¬ç›˜è¯¦æƒ…å¼¹çª— -->
         <div id="diskOverlay" class="disk-overlay" style="display: none;" onclick="hideDiskDetails()"></div>
         <div id="diskExpanded" class="disk-expanded" style="display: none;">
             <div class="disk-expanded-header">
                 <button onclick="hideDiskDetails()" class="close-btn">Ã—</button>
             </div>
             <div id="diskDetailList" class="disk-detail-list">
                 <!-- ç¡¬ç›˜è¯¦ç»†åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
             </div>
         </div>

         <!-- ç™½è‰²è¦†ç›–å±‚ç”¨äºæ˜¾ç¤ºéŸ³ä¹ç»„ä»¶ -->
         <div id="whiteOverlay" class="white-overlay">
             <iframe src="music.html" 
                     style="width: 100%; height: 100%; border: none; border-radius: 8px;"
                     frameborder="0">
             </iframe>
             <!-- éŸ³ä¹æ’­æ”¾çŠ¶æ€æ˜¾ç¤º -->
             <div id="musicPlayingStatus" class="music-playing-status" style="display: none;">
                 <div class="music-playing-content">
                     <div class="music-icon">ğŸµ</div>
                     <div class="music-text">éŸ³ä¹æ’­æ”¾ä¸­</div>
                     <div class="music-waves">
                         <span></span>
                         <span></span>
                         <span></span>
                         <span></span>
                     </div>
                 </div>
             </div>
         </div>
    </div>


    <script>
        // GIFæ–‡ä»¶åˆ—è¡¨ï¼ˆåŠ¨æ€ä»æœåŠ¡å™¨è·å–ï¼‰
         let gifFiles = [];
         let currentGifs = [null, null, null, null];
         
         // é…ç½®ä¿¡æ¯
         let config = {
             frontend_port: 8003,
             backend_port: 8002
         };
         
         /**
          * ä»é…ç½®æ–‡ä»¶è·å–ç«¯å£é…ç½®
          */
         async function fetchConfig() {
             try {
                 const response = await fetch('/config.json');
                 if (response.ok) {
                     config = await response.json();
                     console.log('é…ç½®åŠ è½½æˆåŠŸ:', config);
                 } else {
                     console.warn('é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®');
                 }
             } catch (error) {
                 console.warn('é…ç½®æ–‡ä»¶è¯»å–å‡ºé”™ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:', error);
             }
         }
         
         /**
          * ä»APIè·å–å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨
          */
         async function fetchImageFiles() {
             try {
                 const currentHost = window.location.hostname;
                 const apiUrl = `http://${currentHost}:${config.backend_port}/image-files`;
                 
                 const response = await fetch(apiUrl);
                 if (response.ok) {
                     const data = await response.json();
                     gifFiles = data.files || [];
                     console.log('å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨æ›´æ–°æˆåŠŸ:', gifFiles);
                     return true;
                 } else {
                     console.error('è·å–å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨å¤±è´¥:', response.status);
                     // ä½¿ç”¨é»˜è®¤æ–‡ä»¶åˆ—è¡¨ä½œä¸ºå¤‡ç”¨
                     gifFiles = ['1.gif', '2.gif', '4.gif'];
                     return false;
                 }
             } catch (error) {
                 console.error('è·å–å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨å‡ºé”™:', error);
                 // ä½¿ç”¨é»˜è®¤æ–‡ä»¶åˆ—è¡¨ä½œä¸ºå¤‡ç”¨
                 gifFiles = ['1.gif', '2.gif', '4.gif'];
                 return false;
             }
         }
        
        // ç³»ç»Ÿæ•°æ®å­˜å‚¨å˜é‡
        let systemData = {};
        
        /**
         * ä»APIè·å–ç³»ç»Ÿæ•°æ®
         */
        async function fetchSystemData() {
            try {
                // åŠ¨æ€è·å–å½“å‰é¡µé¢çš„ä¸»æœºåœ°å€ï¼Œæ”¯æŒå±€åŸŸç½‘è®¿é—®
                const currentHost = window.location.hostname;
                const apiUrl = `http://${currentHost}:${config.backend_port}/system-info`;
                
                const response = await fetch(apiUrl);
                if (response.ok) {
                    const data = await response.json();
                    systemData = data;
                    console.log('ç³»ç»Ÿæ•°æ®æ›´æ–°æˆåŠŸ:', data);
                    return true;
                } else {
                    console.error('APIå“åº”é”™è¯¯:', response.status);
                    return false;
                }
            } catch (error) {
                console.error('è·å–ç³»ç»Ÿæ•°æ®å¤±è´¥:', error);
                return false;
            }
        }

        /**
           * åˆå§‹åŒ–é¡µé¢æ•°æ®æ˜¾ç¤º
           */
          async function initializeData() {
              // å…ˆè·å–é…ç½®
              await fetchConfig();
              
              // ç„¶åè·å–å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨
              await fetchImageFiles();
              
              const success = await fetchSystemData();
              if (success) {
                  updateCPUInfo();
                  updateMemoryInfo();
                  updateDiskInfo();
                  updateDiskSummary();
                  updateNetworkInfo();
                  generateIPDropdown();
              }
              updateClock();
              initializeGifs();
          }
         
         /**
          * åˆå§‹åŒ–GIFæ˜¾ç¤º
          */
         function initializeGifs() {
             // ä¸ºæ¯ä¸ªä½ç½®éšæœºåˆ†é…GIF
             for (let i = 0; i < 4; i++) {
                 switchSingleGif(i);
             }
         }
         
         /**
          * éšæœºåˆ‡æ¢å•ä¸ªGIFå›¾ç‰‡
          * @param {number} index - GIFä½ç½®ç´¢å¼• (0-3)
          */
         function switchSingleGif(index) {
             // è·å–å½“å‰å›¾ç‰‡æ–‡ä»¶å
             const currentGif = currentGifs[index];
             
             // åˆ›å»ºå¯é€‰æ‹©çš„GIFåˆ—è¡¨ï¼ˆæ’é™¤å½“å‰å›¾ç‰‡ï¼‰
             const availableGifs = gifFiles.filter(gif => gif !== currentGif);
             
             // å¦‚æœæ²¡æœ‰å…¶ä»–å¯é€‰æ‹©çš„å›¾ç‰‡ï¼Œåˆ™ä¸è¿›è¡Œåˆ‡æ¢
             if (availableGifs.length === 0) {
                 return;
             }
             
             // ä»å¯é€‰æ‹©çš„å›¾ç‰‡ä¸­éšæœºé€‰æ‹©ä¸€ä¸ª
             const randomIndex = Math.floor(Math.random() * availableGifs.length);
             const selectedGif = availableGifs[randomIndex];
             
             // æ›´æ–°å¯¹åº”ä½ç½®çš„GIF
             currentGifs[index] = selectedGif;
             document.getElementById(`gif${index + 1}`).src = `image/${selectedGif}`;
         }

        /**
         * æ›´æ–°CPUä¿¡æ¯æ˜¾ç¤º
         */
        function updateCPUInfo() {
            if (!systemData.cpu) return;
            
            const cpuUsage = systemData.cpu.usage_percent;
            const cpuTemp = systemData.cpu.temperature_c;
            
            document.getElementById('cpuProgress').style.width = cpuUsage + '%';
            document.getElementById('cpuText').textContent = cpuUsage + '% ä½¿ç”¨ä¸­';
            document.getElementById('cpuTemp').textContent = cpuTemp ? cpuTemp + 'Â°C' : '--Â°C';
        }

        /**
         * æ›´æ–°å†…å­˜ä¿¡æ¯æ˜¾ç¤º
         */
        function updateMemoryInfo() {
            if (!systemData.memory) return;
            
            const used = systemData.memory.used_gb;
            const total = systemData.memory.total_gb;
            const percentage = ((used / total) * 100).toFixed(1);
            
            document.getElementById('memoryProgress').style.width = percentage + '%';
            document.getElementById('memoryText').textContent = percentage + '% ä½¿ç”¨ä¸­';
            document.getElementById('memoryInfo').textContent = used + 'GB / ' + total + 'GB';
        }

        /**
          * æ›´æ–°ç¡¬ç›˜ä¿¡æ¯æ˜¾ç¤º
          */
         function updateDiskInfo() {
             if (!systemData.storage || !systemData.storage.disks) return;
             
             // æ›´æ–°æ€»å®¹é‡åœ†å½¢è¿›åº¦æ¡
             const totalUsed = systemData.storage.disks.reduce((sum, disk) => sum + disk.used_gb, 0);
             const totalCapacity = systemData.storage.disks.reduce((sum, disk) => sum + disk.total_gb, 0);
             const totalPercentage = ((totalUsed / totalCapacity) * 100).toFixed(0);
             
             const circumference = 2 * Math.PI * 52;
             const offset = circumference - (totalPercentage / 100) * circumference;
             
             const circle = document.getElementById('totalDiskCircle');
             circle.style.strokeDasharray = circumference;
             circle.style.strokeDashoffset = offset;
             
             document.getElementById('totalDiskPercent').textContent = totalPercentage + '%';
             document.getElementById('totalDiskInfo').textContent = totalUsed.toFixed(0) + 'GB / ' + totalCapacity.toFixed(0) + 'GB';
         }

         /**
          * æ›´æ–°ç¡¬ç›˜æ‘˜è¦æ˜¾ç¤ºï¼ˆä»…æ˜¾ç¤ºç¬¬ä¸€å—ç¡¬ç›˜ï¼‰
          */
         function updateDiskSummary() {
             if (!systemData.storage || !systemData.storage.disks) return;
             
             const diskSummary = document.getElementById('diskSummary');
             if (systemData.storage.disks.length > 0) {
                 const firstDisk = systemData.storage.disks[0];
                 const percentage = ((firstDisk.used_gb / firstDisk.total_gb) * 100).toFixed(1);
                 
                 diskSummary.innerHTML = `
                     <div class="disk-summary">
                         <div class="disk-name">${firstDisk.name}</div>
                         <div class="disk-progress">
                             <div class="disk-progress-fill" style="width: ${percentage}%"></div>
                         </div>
                         <div class="disk-info">${firstDisk.used_gb.toFixed(1)}GB / ${firstDisk.total_gb.toFixed(1)}GB (${percentage}%)</div>
                         <div style="font-size: 10px; color: #666; margin-top: 5px;">ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ç¡¬ç›˜</div>
                     </div>
                 `;
             }
         }

         /**
          * æ˜¾ç¤ºç¡¬ç›˜è¯¦æƒ…å¼¹çª—
          */
         function showDiskDetails() {
             const diskDetailList = document.getElementById('diskDetailList');
             diskDetailList.innerHTML = '';
             
             systemData.storage.disks.forEach((disk, index) => {
                 const percentage = ((disk.used_gb / disk.total_gb) * 100).toFixed(1);
                 const diskItem = document.createElement('div');
                 diskItem.className = 'disk-item';
                 diskItem.innerHTML = `
                     <div class="disk-name">${disk.name} (ç¡¬ç›˜ ${index + 1})</div>
                     <div class="disk-progress">
                         <div class="disk-progress-fill" style="width: ${percentage}%"></div>
                     </div>
                     <div class="disk-info">${disk.used_gb.toFixed(1)}GB / ${disk.total_gb.toFixed(1)}GB (${percentage}%)</div>
                 `;
                 diskDetailList.appendChild(diskItem);
             });
             
             document.getElementById('diskOverlay').style.display = 'block';
             document.getElementById('diskExpanded').style.display = 'block';
         }

         /**
          * éšè—ç¡¬ç›˜è¯¦æƒ…å¼¹çª—
          */
         function hideDiskDetails() {
             document.getElementById('diskOverlay').style.display = 'none';
             document.getElementById('diskExpanded').style.display = 'none';
         }

        /**
         * æ›´æ–°ç½‘ç»œä¿¡æ¯æ˜¾ç¤º
         */
        function updateNetworkInfo() {
            if (!systemData.network) return;
            
            document.getElementById('uploadSpeed').textContent = systemData.network.up_mbps.toFixed(3);
            document.getElementById('downloadSpeed').textContent = systemData.network.down_mbps.toFixed(3);
        }

        /**
         * ç”ŸæˆIPåœ°å€ä¸‹æ‹‰èœå•
         */
        /**
         * ç”ŸæˆIPä¸‹æ‹‰èœå•é€‰é¡¹å¹¶è®¾ç½®é»˜è®¤IP
         */
        function generateIPDropdown() {
            if (!systemData.network || !systemData.network.interfaces) return;
            
            const dropdown = document.getElementById('ipDropdown');
            dropdown.innerHTML = '';
            
            // è®¾ç½®ç¬¬ä¸€ä¸ªIPä¸ºé»˜è®¤æ˜¾ç¤º
            let isFirstIP = true;
            
            systemData.network.interfaces.forEach(interface => {
                const option = document.createElement('div');
                option.className = 'ip-option';
                option.innerHTML = `<strong>${interface.name}</strong><br>${interface.ip}`;
                option.onclick = () => selectIP(interface.ip);
                dropdown.appendChild(option);
                
                // è®¾ç½®ç¬¬ä¸€ä¸ªIPä¸ºé»˜è®¤æ˜¾ç¤º
                if (isFirstIP) {
                    document.getElementById('currentIp').textContent = interface.ip;
                    isFirstIP = false;
                }
            });
        }

        /**
         * é€‰æ‹©IPåœ°å€
         */
        function selectIP(ip) {
            document.getElementById('currentIp').textContent = ip;
            document.getElementById('ipDropdown').style.display = 'none';
        }

        /**
         * åˆ‡æ¢IPä¸‹æ‹‰èœå•æ˜¾ç¤ºçŠ¶æ€
         */
        function toggleIpDropdown() {
            const dropdown = document.getElementById('ipDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }



        /**
         * ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
         */
        function toggleTheme() {
            const body = document.body;
            if (body.getAttribute('data-theme') === 'blue') {
                body.removeAttribute('data-theme');
                localStorage.setItem('theme', 'pink');
            } else {
                body.setAttribute('data-theme', 'blue');
                localStorage.setItem('theme', 'blue');
            }
        }

        /**
         * æ›´æ–°æ—¶é’Ÿæ˜¾ç¤º
         */
        function updateClock() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('clock').textContent = hours + ':' + minutes;
        }

        /**
          * åŠ è½½ä¿å­˜çš„ä¸»é¢˜
          */
         function loadTheme() {
             const savedTheme = localStorage.getItem('theme');
             if (savedTheme === 'blue') {
                 document.body.setAttribute('data-theme', 'blue');
             }
         }

         /**
          * å…¨å±åˆ‡æ¢åŠŸèƒ½
          */
         function toggleFullscreen() {
             if (!document.fullscreenElement) {
                 document.documentElement.requestFullscreen().catch(err => {
                     console.log('æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼:', err);
                 });
             } else {
                 document.exitFullscreen();
             }
         }

         /**
          * æ˜¾ç¤ºç™½è‰²è¦†ç›–å±‚
          */
         function showWhiteOverlay() {
             const overlay = document.getElementById('whiteOverlay');
             overlay.classList.add('show');
             
             // ç›‘å¬iframeä¸­çš„éŸ³ä¹æ’­æ”¾çŠ¶æ€
             const iframe = overlay.querySelector('iframe');
             if (iframe) {
                 iframe.onload = function() {
                     try {
                         const iframeWindow = iframe.contentWindow;
                         const iframeDocument = iframe.contentDocument;
                         
                         // ç›‘å¬éŸ³é¢‘æ’­æ”¾äº‹ä»¶
                         const audioPlayer = iframeDocument.getElementById('audioPlayer');
                         if (audioPlayer) {
                             audioPlayer.addEventListener('play', function() {
                                 document.getElementById('musicStatusBtn').style.display = 'flex';
                             });
                             
                             audioPlayer.addEventListener('pause', function() {
                                 document.getElementById('musicStatusBtn').style.display = 'none';
                             });
                             
                             audioPlayer.addEventListener('ended', function() {
                                 document.getElementById('musicStatusBtn').style.display = 'none';
                             });
                         }
                     } catch (error) {
                         console.log('æ— æ³•è®¿é—®iframeå†…å®¹ï¼Œå¯èƒ½æ˜¯è·¨åŸŸé™åˆ¶');
                     }
                 };
             }
         }

         /**
          * éšè—ç™½è‰²è¦†ç›–å±‚
          */
         function hideWhiteOverlay() {
             const overlay = document.getElementById('whiteOverlay');
             overlay.classList.remove('show');
         }





        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­IPä¸‹æ‹‰èœå•
        document.addEventListener('click', function(event) {
            const ipSelector = document.querySelector('.ip-selector');
            if (!ipSelector.contains(event.target)) {
                document.getElementById('ipDropdown').style.display = 'none';
            }
        });

        /**
         * ç›‘å¬éŸ³ä¹æ’­æ”¾çŠ¶æ€çš„å…¨å±€å‡½æ•°
         */
        function setupMusicStatusListener() {
            // ç›‘å¬æ¥è‡ªmusic.htmlçš„æ¶ˆæ¯
            window.addEventListener('message', function(event) {
                if (event.origin !== window.location.origin) return;
                
                if (event.data.type === 'musicPlay') {
                    const musicStatusBtn = document.getElementById('musicStatusBtn');
                    if (musicStatusBtn) {
                        musicStatusBtn.style.display = 'flex';
                    }
                } else if (event.data.type === 'musicPause' || event.data.type === 'musicEnded') {
                    const musicStatusBtn = document.getElementById('musicStatusBtn');
                    if (musicStatusBtn) {
                        musicStatusBtn.style.display = 'none';
                    }
                }
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            loadTheme();
            await initializeData();
            setupMusicStatusListener();
            
            // æ¯ç§’æ›´æ–°æ—¶é’Ÿ
            setInterval(updateClock, 1000);
            
            // æ¯0.5ç§’ä»APIè·å–æœ€æ–°æ•°æ®
             setInterval(async function() {
                 const success = await fetchSystemData();
                 if (success) {
                     updateCPUInfo();
                     updateMemoryInfo();
                     updateDiskInfo();
                     updateDiskSummary();
                     updateNetworkInfo();
                     generateIPDropdown();
                 }
             }, 500);
        });
    </script>
</body>
</html>